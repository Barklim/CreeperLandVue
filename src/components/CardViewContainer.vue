<script lang="ts">
import { Vue, Component } from 'vue-property-decorator'
import CardView from "../components/CardView.vue";
import CategorieView from "../components/CategorieView.vue";
import axios from "axios";

@Component({
  components: {
    CardView,
    CategorieView
  }
})
export default class CardViewContainer extends Vue {
  dataCat = {};

  show: string = '';

  categoriesbuttons = [ 
    {
      id: 1,
      name: "–í—Å–µ —Ç–æ–≤–∞—Ä—ã"
    }
  ]

  cards = [
    {
      id:1, 
      category: '–ü—Ä–∏–≤–µ–ª–µ–≥–∏–∏',
      title: '–î—Ä–∞–∫–æ–Ω –ö—Ä–∞—è',
      image: 'https://i.trademc.org/shops/3/M/3MQwN232Vh.jpg',
      actions: 0,
      cost: 0,
      description: '<strong>–í—ã–∂–∏–≤–∞–Ω–∏–µ</strong><br>- 7 —Ç–æ—á–µ–∫ –¥–æ–º–∞<br>- 7 –ø—Ä–∏–≤–∞—Ç–æ–≤ –ø–æ 1 500 000 –±–ª–æ–∫–æ–≤<br>- x2.5 –º–Ω–æ–∂–∏—Ç–µ–ª—å –¥–æ–±—ã—á–∏ –≤–∞–ª—é—Ç—ã —Å –º–æ–±–æ–≤<br>- 54 —Å–ª–æ—Ç–∞ –≤ —Ä—é–∫–∑–∞–∫–µ<br>- /workbench –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –≤–µ—Ä—Å—Ç–∞–∫<br>- /enderchest –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π —ç–Ω–¥–µ—Ä-—Å—É–Ω–¥—É–∫<br>- /feed –ø–æ–∫–æ—Ä–º–∏—Ç—å —Å–µ–±—è<br>- /heal –∏—Å—Ü–µ–ª–∏—Ç—å —Å–µ–±—è<br>- /back –≤–æ–∑–≤—Ä–∞—Ç –Ω–∞–∑–∞–¥ (–∏–ª–∏ –Ω–∞ –º–µ—Å—Ç–æ —Å–º–µ—Ä—Ç–∏)<br>- /ptime –ø—Ä–∏–≤–∞—Ç–Ω–æ–µ –≤—Ä–µ–º—è<br>- /kit Dragon<br><br><strong>Whitelist</strong><br>- –î–æ—Å—Ç—É–ø<br><br><em>–ù–∞–≤—Å–µ–≥–¥–∞!</em>'
    },
    {
      id:2, 
      category: '–ü—Ä–∏–≤–µ–ª–µ–≥–∏–∏',
      title: '–î—Ä–∞–∫–æ–Ω –ö—Ä–∞—è',
      image: 'https://i.trademc.org/shops/3/M/3MQwN232Vh.jpg',
      actions: 0,
      cost: 0,
      description: '<strong>–í—ã–∂–∏–≤–∞–Ω–∏–µ</strong><br>- 7 —Ç–æ—á–µ–∫ –¥–æ–º–∞<br>- 7 –ø—Ä–∏–≤–∞—Ç–æ–≤ –ø–æ 1 500 000 –±–ª–æ–∫–æ–≤<br>- x2.5 –º–Ω–æ–∂–∏—Ç–µ–ª—å –¥–æ–±—ã—á–∏ –≤–∞–ª—é—Ç—ã —Å –º–æ–±–æ–≤<br>- 54 —Å–ª–æ—Ç–∞ –≤ —Ä—é–∫–∑–∞–∫–µ<br>- /workbench –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –≤–µ—Ä—Å—Ç–∞–∫<br>- /enderchest –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π —ç–Ω–¥–µ—Ä-—Å—É–Ω–¥—É–∫<br>- /feed –ø–æ–∫–æ—Ä–º–∏—Ç—å —Å–µ–±—è<br>- /heal –∏—Å—Ü–µ–ª–∏—Ç—å —Å–µ–±—è<br>- /back –≤–æ–∑–≤—Ä–∞—Ç –Ω–∞–∑–∞–¥ (–∏–ª–∏ –Ω–∞ –º–µ—Å—Ç–æ —Å–º–µ—Ä—Ç–∏)<br>- /ptime –ø—Ä–∏–≤–∞—Ç–Ω–æ–µ –≤—Ä–µ–º—è<br>- /kit Dragon<br><br><strong>Whitelist</strong><br>- –î–æ—Å—Ç—É–ø<br><br><em>–ù–∞–≤—Å–µ–≥–¥–∞!</em>'
    },
    {
      id:3, 
      category: '–ü—Ä–∏–≤–µ–ª–µ–≥–∏–∏',
      title: '–î—Ä–∞–∫–æ–Ω –ö—Ä–∞—è',
      image: 'https://i.trademc.org/shops/3/M/3MQwN232Vh.jpg',
      actions: 0,
      cost: 0,
      description: '<strong>–í—ã–∂–∏–≤–∞–Ω–∏–µ</strong><br>- 7 —Ç–æ—á–µ–∫ –¥–æ–º–∞<br>- 7 –ø—Ä–∏–≤–∞—Ç–æ–≤ –ø–æ 1 500 000 –±–ª–æ–∫–æ–≤<br>- x2.5 –º–Ω–æ–∂–∏—Ç–µ–ª—å –¥–æ–±—ã—á–∏ –≤–∞–ª—é—Ç—ã —Å –º–æ–±–æ–≤<br>- 54 —Å–ª–æ—Ç–∞ –≤ —Ä—é–∫–∑–∞–∫–µ<br>- /workbench –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –≤–µ—Ä—Å—Ç–∞–∫<br>- /enderchest –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π —ç–Ω–¥–µ—Ä-—Å—É–Ω–¥—É–∫<br>- /feed –ø–æ–∫–æ—Ä–º–∏—Ç—å —Å–µ–±—è<br>- /heal –∏—Å—Ü–µ–ª–∏—Ç—å —Å–µ–±—è<br>- /back –≤–æ–∑–≤—Ä–∞—Ç –Ω–∞–∑–∞–¥ (–∏–ª–∏ –Ω–∞ –º–µ—Å—Ç–æ —Å–º–µ—Ä—Ç–∏)<br>- /ptime –ø—Ä–∏–≤–∞—Ç–Ω–æ–µ –≤—Ä–µ–º—è<br>- /kit Dragon<br><br><strong>Whitelist</strong><br>- –î–æ—Å—Ç—É–ø<br><br><em>–ù–∞–≤—Å–µ–≥–¥–∞!</em>'
    }
  ]

  mounted() {
    
    axios
      .get("https://api.trademc.org/shop.getItems?shop=129168&v=3")
      .then(response => {

        this.dataCat = response.data.response;

        const curDataCat = this.dataCat

        const dataCategorie = curDataCat.categories.map(function(item) {
          return { 
            id: item.id,
            name: item.name
          };
        });

        // foreEach don't work here, why?
        for (let i = 0; i < dataCategorie.length; i++) {

           this.categoriesbuttons.push(dataCategorie[i])
        }

      })
      .catch(error => {
        console.log(error);
        this.errored = true;
      });
  }

}
</script>

<template>
  <div class="module-items gray-area" id="donat">
    <div class="wrapper">
      <h2>
        –î–æ–Ω–∞—Ç 
        <span class="sub-text pseudo-opacity">–í–∞–ª—é—Ç–∞: 
          <span 
            class="dropdown link" 
            data-default-value="" 
            data-placeholder="–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞–ª—é—Ç—É" 
            data-action="shop.currency.set"
            @mouseenter="show = !show"
            @mouseleave="show = !show"
            :class="{ show }"
          >
            <span class="current-value">üá∑üá∫ –†–æ—Å—Å–∏–π—Å–∫–∏–π —Ä—É–±–ª—å</span><span class="options"><span onclick="shop.currency.set('RUB')">
              üá∑üá∫ –†–æ—Å—Å–∏–π—Å–∫–∏–π —Ä—É–±–ª—å
            </span>
            <span onclick="shop.currency.set('UAH')">üá∫üá¶ –£–∫—Ä–∞–∏–Ω—Å–∫–∞—è –≥—Ä–∏–≤–Ω–∞</span>
            <span onclick="shop.currency.set('BYN')">üáßüáæ –ë–µ–ª–æ—Ä—É—Å—Å–∫–∏–π —Ä—É–±–ª—å</span>
            <span onclick="shop.currency.set('KZT')">üá∞üáø –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω—Å–∫–∏–π —Ç–µ–Ω–≥–µ</span>
            <span onclick="shop.currency.set('USD')">üá∫üá∏ –î–æ–ª–ª–∞—Ä –°–®–ê</span>
            <span onclick="shop.currency.set('EUR')">üá™üá∫ –ï–≤—Ä–æ</span></span>
          </span>
        </span>
    </h2>


    <!-- ---------- Categories ---------- -->
    <div v-if="categoriesbuttons" id="categoriesItems" class="cards inner">
      <CategorieView
        v-for="categorieItem in categoriesbuttons"
        v-bind:key="categorieItem.id" 
        :categorieItem="categorieItem"
      ></CategorieView>
    </div>
    <div v-else>
      <div>–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏...</div>
    </div>


    <!-- ---------- Cards ---------- -->
    <div v-if="cards" id="items" class="cards inner">
      <CardView 
        v-for="cardItem in cards"
        v-bind:key="cardItem.id" 
        :cardItem="cardItem"
      ></CardView>
    </div>
    <div v-else>
      –ü–æ–∫–∞ –∑–¥–µ—Å—å –ø—É—Å—Ç–æ :(
    </div>

    <!-- ---------- Manual ---------- -->
    <div class="module-manual">
      <h2 class="enable-padding">–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ø–æ–∫—É–ø–∫–µ</h2>
      <div class="manual clear-fix">
        <div class="content">
          <strong>1. –í—ã–±–æ—Ä —Ç–æ–≤–∞—Ä–∞</strong>
          <br>
          –î–æ–±–∞–≤—å—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ç–æ–≤–∞—Ä—ã –≤ –∫–æ—Ä–∑–∏–Ω—É –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º—É—é —Ñ–æ—Ä–º—É.
          <br>
          <br>
          <strong>2. –°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã</strong>
          <br>
          –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ–º—ã–π —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã –∏ —Å–ª–µ–¥—É–π—Ç–µ –¥–∞–ª—å–Ω–µ–π—à–∏–º –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º.
          <br>
          <br>
          <strong>3. –ê–∫—Ç–∏–≤–∞—Ü–∏—è –ø—Ä–∏–≤–∏–ª–µ–≥–∏–∏</strong>
          <br>
          –¢–æ–≤–∞—Ä –≤—ã–¥–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã –≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–º —Ä–µ–∂–∏–º–µ –∏ –º–æ–º–µ–Ω—Ç–∞–ª—å–Ω–æ.
        </div>
      </div>
    </div>

    </div>
  </div>

</template>

<style lang="scss" scoped>

/* ---------- Cards ---------- */

.gray-area {
    background: #f8f9fa;
}
.wrapper {
    max-width: 980px;
    margin: 0 auto;
    padding: 80px 20px;
    box-sizing: border-box;
}

h2:not(.enable-padding):first-child {
    padding-top: 0;
}
h2 {
    /*font-size: 32px;*/
    font-size: 28px;
    font-weight: 900;
    margin: 0;
    padding-bottom: 40px;
    padding-top: 80px;
    line-height: 1;
    /* */
    text-align: initial;
    color: rgb(51, 51, 51);
}
h2>span {
    margin-top: 10px;
    line-height: 1;
}
.sub-text {
    opacity: .3;
    text-transform: uppercase;
    font-size: 11.7px;
    font-weight: 700;
    line-height: 120%;
    display: block;
}
.sub-text.pseudo-opacity {
    opacity: 1;
    color: #bbbcbd;
}
span.current-value {
    color: #21ba45;  
}
.dropdown .options {
    text-transform: none;
    display: none;
    position: absolute;
    /*position: relative;*/
    /*width: 80px;*/
    /*left: 42px;*/
    margin-left: 40px;

    z-index: 15;
    background: #fff;
    padding: 3px 0;
    color: #333;
    /* top: calc(100% + 10px); */
    /* left: -20px; */
    /*left: 68px;*/
    top: 106%;
    cursor: default;
    font-size: 13px;
    font-weight: 400;
    letter-spacing: normal;
    min-width: 200px;
    -wekbit-box-shadow: 0 27px 85px -5px rgba(0,0,0,.15);
    box-shadow: 0 27px 85px -5px rgba(0,0,0,.15);
    border-radius: 3px;
}
.dropdown .options span {
    display: block;
    white-space: nowrap;
    padding: 12px 20px;
    line-height: 1;
    color: inherit;
    text-decoration: none;
}

.dropdown .options {
  &:after {
    content:"";
    position:absolute;
    width:0;
    height:0;
    border-style:solid;
    border-width:0 6px 6px;
    border-color:transparent transparent #fff;
    top:-6px;
    left:36px;
    /*left: 80px;*/
  }
}
.dropdown .options {
  &:before {
    content:"";
    display:block;
    height:10px;
    position:absolute;
    top:-10px;
    width:100%
  }
}

.dropdown.show .options {
  display: block;
  
  -webkit-animation: fadein 1s cubic-bezier(0, 1.15, 0.2, 1) alternate 1;
  -moz-animation: fadein 1s cubic-bezier(0, 1.15, 0.2, 1) alternate 1;
  animation: fadein 1s cubic-bezier(0, 1.15, 0.2, 1) alternate 1;
}
@-webkit-keyframes fadein {
    from { opacity: 0; top: 108%}
    to { opacity: 1; top: 106% }
}
@-moz-keyframes fadein {
    from { opacity: 0; top: 108% }
    to { opacity: 1; top: 106%}
}
@keyframes fadein {
    from { opacity: 0; top: 108% }
    to { opacity: 1; top: 106% }
}
/*
.dropdown.show .options {
  display: block;
  margin-top: -20px !important;
}
*/

span.current-value {
  &:hover {
    text-decoration: underline;
  }
}
.options span {
  &:hover {
    background: #f8f9fa;
  }
}

span.current-value {
    padding-bottom: 10px;
    display: inline-block;
}

/* ---------- Manual ---------- */

.manual.clear-fix {
  text-align: initial;
  font-size: 13px;
  line-height: 19.5px;
}
clear-fix {
  &:after {
    content: "";
    display: block;
    clear: both;
  }
}

</style>